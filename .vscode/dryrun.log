make --dry-run --always-make --keep-going --print-directory
make: Entering directory `/Users/christian/git/github.com/slashdevops/aws_cloudwatch_exporter'
echo ">> checking code style"
fmtRes=$(gofmt -d $(find . -path ./vendor -prune -o -name '*.go' -print)); \
	if [ -n "${fmtRes}" ]; then \
		echo "gofmt checking failed!"; echo "${fmtRes}"; echo; \
		echo "Please ensure you are using $(go version) for formatting code."; \
		exit 1; \
	fi
echo ">> checking license header"
licRes=$(for file in $(find . -type f -iname '*.go' ! -path './vendor/*') ; do awk 'NR<=3' $file | grep -Eq "(Copyright|generated|GENERATED)" || echo $file; done); \
       if [ -n "${licRes}" ]; then \
               echo "license header checking failed:"; echo "${licRes}"; \
               exit 1; \
       fi
echo ">> running check for unused/missing packages in go.mod"
GO111MODULE=on go mod tidy
git diff --exit-code -- go.sum go.mod
 
curl -s -L https://github.com/prometheus/promu/releases/download/v0.5.0/promu-0.5.0.darwin-arm64.tar.gz | tar -xvzf - -C /var/folders/yc/w7gzxwfd2wg4d8s043jvcrqr0000gn/T/tmp.2diI8mDq
mkdir -p /Users/christian/go/bin
cp /var/folders/yc/w7gzxwfd2wg4d8s043jvcrqr0000gn/T/tmp.2diI8mDq/promu-0.5.0.darwin-arm64/promu /Users/christian/go/bin/promu
rm -r /var/folders/yc/w7gzxwfd2wg4d8s043jvcrqr0000gn/T/tmp.2diI8mDq
 
echo ">> building binaries"
 
GO111MODULE=on /Users/christian/go/bin/promu build --prefix /Users/christian/git/github.com/slashdevops/aws_cloudwatch_exporter 
echo ">> running all tests"
GO111MODULE=on go test   ./...
make: Leaving directory `/Users/christian/git/github.com/slashdevops/aws_cloudwatch_exporter'
 
